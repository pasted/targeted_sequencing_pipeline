<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: ParseMetrics
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!ParseMetrics.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (P)</a> &raquo;
    
    
    <span class="title">ParseMetrics</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: ParseMetrics
  <span class="abstract note title">Abstract</span>
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ParseMetrics</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">parse_metrics.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <div class="note abstract">
  <strong>This class is abstract.</strong>
  <div class='inline'>
<p>ParseMetrics class: Various methods for handling metrics files generated by
Picard CalculateHSMetrics and MarkDuplicates</p>
</div>
</div>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>Garan Jones</p>
</div>
      
    </li>
  
</ul>

</div>






  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_batch_metrics-instance_method" title="#parse_batch_metrics (instance method)">- (Object) <strong>parse_batch_metrics</strong>(this_batch, samples) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>True.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_duplicates-instance_method" title="#parse_duplicates (instance method)">- (Object) <strong>parse_duplicates</strong>(input_file_path, metrics_line) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The generated Duplicate object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_metrics-instance_method" title="#parse_metrics (instance method)">- (Object) <strong>parse_metrics</strong>(input_file_path, metrics_line) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The generated Metric object.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="parse_batch_metrics-instance_method">
  
    - (<tt>Object</tt>) <strong>parse_batch_metrics</strong>(this_batch, samples) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>this_batch</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Batch object containing metadata about batch</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>samples</span>
      
      
        <span class='type'>(<tt>Array&lt;Object&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An array of Sample objects</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'>
<p>true</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'parse_metrics.rb', line 77</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_batch_metrics'>parse_batch_metrics</span><span class='lparen'>(</span><span class='id identifier rubyid_this_batch'>this_batch</span><span class='comma'>,</span> <span class='id identifier rubyid_samples'>samples</span><span class='rparen'>)</span>
	
		<span class='id identifier rubyid_this_metric'>this_metric</span> <span class='op'>=</span> <span class='const'>ParseMetrics</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
		<span class='id identifier rubyid_phenotype_metric_line'>phenotype_metric_line</span> <span class='op'>=</span> <span class='id identifier rubyid_this_batch'>this_batch</span><span class='period'>.</span><span class='id identifier rubyid_phenotype_metric_line'>phenotype_metric_line</span>
		<span class='id identifier rubyid_overall_metric_line'>overall_metric_line</span> <span class='op'>=</span> <span class='id identifier rubyid_this_batch'>this_batch</span><span class='period'>.</span><span class='id identifier rubyid_overall_metric_line'>overall_metric_line</span>
		<span class='id identifier rubyid_duplicate_metric_line'>duplicate_metric_line</span> <span class='op'>=</span> <span class='id identifier rubyid_this_batch'>this_batch</span><span class='period'>.</span><span class='id identifier rubyid_duplicate_metric_line'>duplicate_metric_line</span>
   
		<span class='id identifier rubyid_phenotype_metric_hash'>phenotype_metric_hash</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
		<span class='id identifier rubyid_overall_metric_array'>overall_metric_array</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
		<span class='id identifier rubyid_duplicate_array'>duplicate_array</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
		
		<span class='id identifier rubyid_samples'>samples</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_this_sample'>this_sample</span><span class='op'>|</span>
			<span class='id identifier rubyid_phenotype_metric_file_path'>phenotype_metric_file_path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>../../metrics/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_this_sample'>this_sample</span><span class='period'>.</span><span class='id identifier rubyid_panel_version'>panel_version</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_this_sample'>this_sample</span><span class='period'>.</span><span class='id identifier rubyid_sample_id'>sample_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_this_sample'>this_sample</span><span class='period'>.</span><span class='id identifier rubyid_gender'>gender</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_this_sample'>this_sample</span><span class='period'>.</span><span class='id identifier rubyid_phenotype'>phenotype</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>.phenotype.bait_capture_metrics</span><span class='tstring_end'>&quot;</span></span>
			<span class='id identifier rubyid_overall_metric_file_path'>overall_metric_file_path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>../../metrics/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_this_sample'>this_sample</span><span class='period'>.</span><span class='id identifier rubyid_panel_version'>panel_version</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_this_sample'>this_sample</span><span class='period'>.</span><span class='id identifier rubyid_sample_id'>sample_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_this_sample'>this_sample</span><span class='period'>.</span><span class='id identifier rubyid_gender'>gender</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>.overall.bait_capture_metrics</span><span class='tstring_end'>&quot;</span></span>
			<span class='id identifier rubyid_duplicates_file_path'>duplicates_file_path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>../../duplicates/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_this_sample'>this_sample</span><span class='period'>.</span><span class='id identifier rubyid_panel_version'>panel_version</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_this_sample'>this_sample</span><span class='period'>.</span><span class='id identifier rubyid_sample_id'>sample_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.duplicates</span><span class='tstring_end'>&quot;</span></span>
			
			<span class='id identifier rubyid_this_phenotype_metric'>this_phenotype_metric</span> <span class='op'>=</span> <span class='id identifier rubyid_this_metric'>this_metric</span><span class='period'>.</span><span class='id identifier rubyid_parse_metrics'>parse_metrics</span><span class='lparen'>(</span><span class='id identifier rubyid_phenotype_metric_file_path'>phenotype_metric_file_path</span><span class='comma'>,</span> <span class='id identifier rubyid_phenotype_metric_line'>phenotype_metric_line</span><span class='rparen'>)</span>
			<span class='kw'>if</span> <span class='id identifier rubyid_phenotype_metric_hash'>phenotype_metric_hash</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='id identifier rubyid_this_sample'>this_sample</span><span class='period'>.</span><span class='id identifier rubyid_phenotype'>phenotype</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='rparen'>)</span>
				<span class='id identifier rubyid_this_phenotype_array'>this_phenotype_array</span> <span class='op'>=</span> <span class='id identifier rubyid_phenotype_metric_hash'>phenotype_metric_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_this_sample'>this_sample</span><span class='period'>.</span><span class='id identifier rubyid_phenotype'>phenotype</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='rbracket'>]</span>
				<span class='id identifier rubyid_this_phenotype_array'>this_phenotype_array</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_this_phenotype_metric'>this_phenotype_metric</span><span class='rparen'>)</span>
				<span class='id identifier rubyid_phenotype_metric_hash'>phenotype_metric_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_this_sample'>this_sample</span><span class='period'>.</span><span class='id identifier rubyid_phenotype'>phenotype</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_this_phenotype_array'>this_phenotype_array</span>
			<span class='kw'>else</span>
				<span class='id identifier rubyid_this_phenotype_array'>this_phenotype_array</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
				<span class='id identifier rubyid_this_phenotype_array'>this_phenotype_array</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_this_phenotype_metric'>this_phenotype_metric</span><span class='rparen'>)</span>
				<span class='id identifier rubyid_phenotype_metric_hash'>phenotype_metric_hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_this_sample'>this_sample</span><span class='period'>.</span><span class='id identifier rubyid_phenotype'>phenotype</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_this_phenotype_array'>this_phenotype_array</span>
			<span class='kw'>end</span>
			
			<span class='id identifier rubyid_this_overall_metric'>this_overall_metric</span> <span class='op'>=</span> <span class='id identifier rubyid_this_metric'>this_metric</span><span class='period'>.</span><span class='id identifier rubyid_parse_metrics'>parse_metrics</span><span class='lparen'>(</span><span class='id identifier rubyid_overall_metric_file_path'>overall_metric_file_path</span><span class='comma'>,</span> <span class='id identifier rubyid_overall_metric_line'>overall_metric_line</span><span class='rparen'>)</span>
			<span class='id identifier rubyid_overall_metric_array'>overall_metric_array</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_this_overall_metric'>this_overall_metric</span><span class='rparen'>)</span>
			
			<span class='id identifier rubyid_this_duplicate'>this_duplicate</span> <span class='op'>=</span> <span class='id identifier rubyid_this_metric'>this_metric</span><span class='period'>.</span><span class='id identifier rubyid_parse_duplicates'>parse_duplicates</span><span class='lparen'>(</span><span class='id identifier rubyid_duplicates_file_path'>duplicates_file_path</span><span class='comma'>,</span> <span class='id identifier rubyid_duplicate_metric_line'>duplicate_metric_line</span><span class='rparen'>)</span>
			<span class='id identifier rubyid_duplicate_array'>duplicate_array</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_this_duplicate'>this_duplicate</span><span class='rparen'>)</span>
		<span class='kw'>end</span>
		
		<span class='comment'>#write out phenotype metrics
</span>		<span class='id identifier rubyid_phenotype_metric_hash'>phenotype_metric_hash</span><span class='period'>.</span><span class='id identifier rubyid_each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_phenotype'>phenotype</span><span class='comma'>,</span> <span class='id identifier rubyid_this_metric_array'>this_metric_array</span><span class='op'>|</span>
			<span class='id identifier rubyid_csv_data'>csv_data</span> <span class='op'>=</span> <span class='const'>CSV</span><span class='period'>.</span><span class='id identifier rubyid_generate'>generate</span><span class='lparen'>(</span><span class='label'>col_sep:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
				<span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_this_metric_array'>this_metric_array</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_variable_order'>variable_order</span>
				<span class='id identifier rubyid_this_metric_array'>this_metric_array</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_this_metric'>this_metric</span><span class='op'>|</span>
					<span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_this_metric'>this_metric</span><span class='period'>.</span><span class='id identifier rubyid_print_attributes'>print_attributes</span>
				<span class='kw'>end</span>
			<span class='kw'>end</span>
			<span class='comment'># Writing the csv data back to the same file, (also specify UTF-8 format)
</span>			<span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>../../metrics/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_this_batch'>this_batch</span><span class='period'>.</span><span class='id identifier rubyid_batch_id'>batch_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_phenotype'>phenotype</span><span class='embexpr_end'>}</span><span class='tstring_content'>.phenotype.metrics</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w:UTF-8</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_csv_data'>csv_data</span><span class='rparen'>)</span><span class='rbrace'>}</span>
		<span class='kw'>end</span>
		
		<span class='id identifier rubyid_csv_data'>csv_data</span> <span class='op'>=</span> <span class='const'>CSV</span><span class='period'>.</span><span class='id identifier rubyid_generate'>generate</span><span class='lparen'>(</span><span class='label'>col_sep:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
				<span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_overall_metric_array'>overall_metric_array</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_variable_order'>variable_order</span>
				<span class='id identifier rubyid_overall_metric_array'>overall_metric_array</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_this_metric'>this_metric</span><span class='op'>|</span>
					<span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_this_metric'>this_metric</span><span class='period'>.</span><span class='id identifier rubyid_print_attributes'>print_attributes</span>
				<span class='kw'>end</span>
		<span class='kw'>end</span>
		
		<span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>../../metrics/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_this_batch'>this_batch</span><span class='period'>.</span><span class='id identifier rubyid_batch_id'>batch_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.overall.metrics</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w:UTF-8</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_csv_data'>csv_data</span><span class='rparen'>)</span><span class='rbrace'>}</span>
		
		<span class='id identifier rubyid_csv_data'>csv_data</span> <span class='op'>=</span> <span class='const'>CSV</span><span class='period'>.</span><span class='id identifier rubyid_generate'>generate</span><span class='lparen'>(</span><span class='label'>col_sep:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_csv'>csv</span><span class='op'>|</span>
				<span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_duplicate_array'>duplicate_array</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_variable_order'>variable_order</span>
				<span class='id identifier rubyid_duplicate_array'>duplicate_array</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_this_duplicate'>this_duplicate</span><span class='op'>|</span>
					<span class='id identifier rubyid_csv'>csv</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_this_duplicate'>this_duplicate</span><span class='period'>.</span><span class='id identifier rubyid_print_attributes'>print_attributes</span>
				<span class='kw'>end</span>
		<span class='kw'>end</span>
			
		<span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>../../duplicates/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_this_batch'>this_batch</span><span class='period'>.</span><span class='id identifier rubyid_batch_id'>batch_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.overall.duplicates</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w:UTF-8</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_csv_data'>csv_data</span><span class='rparen'>)</span><span class='rbrace'>}</span>
		
		<span class='kw'>return</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse_duplicates-instance_method">
  
    - (<tt>Object</tt>) <strong>parse_duplicates</strong>(input_file_path, metrics_line) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns The generated Duplicate object</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>input_file_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The filepath to the input file</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>metrics_line</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Set by config file, which line of input file to parse into the Duplicate
object</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The generated Duplicate object</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'parse_metrics.rb', line 44</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_duplicates'>parse_duplicates</span><span class='lparen'>(</span><span class='id identifier rubyid_input_file_path'>input_file_path</span><span class='comma'>,</span> <span class='id identifier rubyid_metrics_line'>metrics_line</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_counter'>counter</span> <span class='op'>=</span> <span class='int'>0</span>
		<span class='id identifier rubyid_this_duplicate'>this_duplicate</span> <span class='op'>=</span> <span class='const'>Duplicate</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
		<span class='const'>IO</span><span class='period'>.</span><span class='id identifier rubyid_foreach'>foreach</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_input_file_path'>input_file_path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_this_line'>this_line</span><span class='op'>|</span> 
			
			<span class='kw'>if</span> <span class='lparen'>(</span> <span class='id identifier rubyid_this_line'>this_line</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(^\r|^\n|^\r\n|^#)</span><span class='regexp_end'>/</span></span> <span class='rparen'>)</span>
				<span class='id identifier rubyid_counter'>counter</span> <span class='op'>=</span> <span class='id identifier rubyid_counter'>counter</span> <span class='op'>+</span> <span class='int'>1</span>
			<span class='kw'>else</span>

				<span class='kw'>if</span> <span class='id identifier rubyid_counter'>counter</span> <span class='op'>==</span> <span class='id identifier rubyid_metrics_line'>metrics_line</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>

					<span class='id identifier rubyid_duplicates_array'>duplicates_array</span> <span class='op'>=</span> <span class='id identifier rubyid_this_line'>this_line</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
					
					<span class='id identifier rubyid_this_duplicate'>this_duplicate</span><span class='period'>.</span><span class='id identifier rubyid_variable_order'>variable_order</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_var'>var</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
						<span class='id identifier rubyid_file_var'>file_var</span> <span class='op'>=</span> <span class='id identifier rubyid_duplicates_array'>duplicates_array</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span>
						<span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_file_var'>file_var</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_file_var'>file_var</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
							<span class='id identifier rubyid_file_var'>file_var</span> <span class='op'>=</span> <span class='kw'>nil</span> 
						<span class='kw'>end</span>

						<span class='id identifier rubyid_this_duplicate'>this_duplicate</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_var'>var</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_file_var'>file_var</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='rparen'>)</span>
					<span class='kw'>end</span>
				<span class='kw'>end</span>
				<span class='id identifier rubyid_counter'>counter</span> <span class='op'>=</span> <span class='id identifier rubyid_counter'>counter</span> <span class='op'>+</span> <span class='int'>1</span>
			<span class='kw'>end</span>
		<span class='kw'>end</span>
		<span class='kw'>return</span> <span class='id identifier rubyid_this_duplicate'>this_duplicate</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse_metrics-instance_method">
  
    - (<tt>Object</tt>) <strong>parse_metrics</strong>(input_file_path, metrics_line) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns The generated Metric object</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>input_file_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The filepath to the input file</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>metrics_line</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Set by config file, which line of input file to parse into the Metric
object</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The generated Metric object</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'parse_metrics.rb', line 13</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_metrics'>parse_metrics</span><span class='lparen'>(</span><span class='id identifier rubyid_input_file_path'>input_file_path</span><span class='comma'>,</span> <span class='id identifier rubyid_metrics_line'>metrics_line</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_counter'>counter</span> <span class='op'>=</span> <span class='int'>0</span>
		<span class='id identifier rubyid_this_metric'>this_metric</span> <span class='op'>=</span> <span class='const'>Metric</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
		<span class='const'>IO</span><span class='period'>.</span><span class='id identifier rubyid_foreach'>foreach</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_input_file_path'>input_file_path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_this_line'>this_line</span><span class='op'>|</span> 
		
			<span class='kw'>if</span> <span class='lparen'>(</span> <span class='id identifier rubyid_this_line'>this_line</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(^\r|^\n|^\r\n|^#)</span><span class='regexp_end'>/</span></span> <span class='rparen'>)</span>
				<span class='id identifier rubyid_counter'>counter</span> <span class='op'>=</span> <span class='id identifier rubyid_counter'>counter</span> <span class='op'>+</span> <span class='int'>1</span>
			<span class='kw'>else</span>
				<span class='kw'>if</span> <span class='id identifier rubyid_counter'>counter</span> <span class='op'>==</span> <span class='id identifier rubyid_metrics_line'>metrics_line</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
					
					<span class='id identifier rubyid_metrics_array'>metrics_array</span> <span class='op'>=</span> <span class='id identifier rubyid_this_line'>this_line</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
					
					<span class='id identifier rubyid_this_metric'>this_metric</span><span class='period'>.</span><span class='id identifier rubyid_variable_order'>variable_order</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_var'>var</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
						<span class='id identifier rubyid_file_var'>file_var</span> <span class='op'>=</span> <span class='id identifier rubyid_metrics_array'>metrics_array</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span>
						<span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_file_var'>file_var</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_file_var'>file_var</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
							<span class='id identifier rubyid_file_var'>file_var</span> <span class='op'>=</span> <span class='kw'>nil</span> 
						<span class='kw'>end</span>
						<span class='id identifier rubyid_this_metric'>this_metric</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_var'>var</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_file_var'>file_var</span><span class='rparen'>)</span>
					<span class='kw'>end</span>
				<span class='kw'>end</span>
				<span class='id identifier rubyid_counter'>counter</span> <span class='op'>=</span> <span class='id identifier rubyid_counter'>counter</span> <span class='op'>+</span> <span class='int'>1</span>
			<span class='kw'>end</span>
		<span class='kw'>end</span>
		<span class='kw'>return</span> <span class='id identifier rubyid_this_metric'>this_metric</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Tue Jan 26 14:40:10 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.1.0).
</div>

  </body>
</html>